<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZF - Index</title>
    
    <!-- LINK UNIVERSAL CSS -->
    <link rel="stylesheet" href="styles.css"> 
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body id="body-main"> 
    
    <!-- NEW: Full Screen Canvas for Dynamic Title -->
    <canvas id="particleCanvas"></canvas>

    <!-- TOP-LEVEL V1 ELEMENT: BIO -->
    <div id="title-bio">
        <p>
            UK-based Undergrad Data Science Student
        </p>
    </div>
    
    <!-- HINT FOR USER INTERACTION -->
    <p class="hint text-xl font-light">Mouse over the title area to reveal the title.</p>

    <!-- MAIN V1 CONTENT (The two square buttons) -->
    <div id="app-container">
        
        <!-- PANEL 1: STUFF (LEFT) -->
        <div id="stuff-panel" class="panel" 
            data-target="stuff" 
            onclick="toggleSidebar('stuff')"> 
            <div class="initial-content">
                <i class="fas fa-box-open"></i>
                <h2>Stuff</h2>
                <p>Projects, Experiments & Code.</p>
            </div>
        </div>

        <!-- PANEL 2: SOCIALS (RIGHT) -->
        <div id="links-panel" class="panel" 
            data-target="links" 
            onclick="toggleSidebar('links')"> 
            <div class="initial-content">
                <i class="fas fa-user-circle"></i>
                <h2>Socials</h2>
                <p>View all my links & contact info.</p>
            </div>
        </div>
    </div>
    
    <!-- NEW: SINGLE MOBILE CONTENT PANE -->
    <div id="mobile-content-pane">
        <div class="v2-content-inner" id="mobile-content-inner">
            <!-- Content will be injected here -->
        </div>
    </div>
    
    <!-- DESKTOP-ONLY SIDEBARS (Content kept for injection) -->
    <div id="stuff-sidebar" class="sidebar-wrapper">
        <div class="v2-content-inner" id="stuff-desktop-content">
            <h1>
                Stuff (Projects & Tools)
            </h1>
            <div class="grid">
                <a href="uni.html" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-graduation-cap"></i> <h3>Uni Dash</h3> <p>Helpful Shortcuts</p> </div> </a>
                <a href="quotes.html" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-quote-right"></i> <h3>Fav Quotes</h3> <p>Just the Hits</p> </div> </a>
                <a href="https://falixnodes.net/startserver" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-server"></i> <h3>Minecraft Server</h3> <p>ip=zfgaming</p> </div> </a>
                <a href="https://youtube.com/playlist?list=PLmDAk0SfywoVrnnN4JBR4tLcjPqfDA5N4&si=TBfZ-AnuuMInpFTM" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-calendar-alt"></i> <h3>College CS Project</h3> <p>Timetable Scheduler</p> </div> </a>
                <a href="https://docs.google.com/document/d/1hdCehlL4bRm4cgJa2KhzUSMKTOEiEcjmxxgih3togmM/edit?usp=sharing" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-brain"></i> <h3>EPQ</h3> <p>AI, Humans best friend?</p> </div> </a>
                <a href="https://steamcommunity.com/id/zfw1ll0w/myworkshopfiles/" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-steam"></i> <h3>Wallpaper Engine</h3> <p>My work</p> </div> </a>
                <a href="https://steamcommunity.com/groups/0fukkes" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-steam-symbol"></i> <h3>Steam Group</h3> <p>Faze Up</p> </div> </a>
                <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=3323426346" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-image"></i> <h3>Steam Artwork</h3> <p>Like and Sub</p> </div> </a>
                <a href="https://mynickname.com/gamingamer" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-gamepad"></i> <h3>w1ll0w</h3> <p>Peep it</p> </div> </a>
                <a href="https://youtu.be/ItC8GV4BJuw" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-gift"></i> <h3>Christmas Album</h3> <p>Ho Ho Ho</p> </div> </a>
                <a href="https://steamcommunity.com/broadcast/watch/76561198151099217/" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-video"></i> <h3>Steam Stream</h3> <p>wassup</p> </div> </a>
                <a href="/wote/index.html" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-clipboard"></i> <h3>Wote</h3> <p>take note</p> </div> </a>
                <a href="/calc67/index.html" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-calculator"></i> <h3>Calc67</h3> <p>daily</p> </div> </a>
                <a href="https://themes.vivaldi.net/users/W1ll0w" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-image"></i> <h3>Vivaldi Themes</h3> <p>Lotta Style</p> </div> </a>
            </div>
        </div>
    </div>

    <div id="links-sidebar" class="sidebar-wrapper">
        <div class="v2-content-inner" id="links-desktop-content">
            <h1>
                Links & Contact
            </h1>
            <div class="grid">
                <a href="https://www.amazon.co.uk/gp/profile/amzn1.account.AFZV5OZGH35QG65NFVT623ERKCJA/ref=cm_cr_dp_d_gw_tr?ie=UTF8" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-amazon"></i> <h3>Amazon</h3> <p>bought&thought</p> </div> </a>
                <a href="https://www.google.com/maps/contrib/109714089787548110234/reviews" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-google"></i> <h3>Maps</h3> <p>reviews</p> </div> </a>
                <a href="https://www.youtube.com/@w1ll0w62" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-youtube"></i> <h3>YouTube</h3> <p>bits&bobs</p> </div> </a>
                <a href="https://open.spotify.com/user/vleonardo2006" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-spotify"></i> <h3>Spotify</h3> <p>connoisseur</p> </div> </a>
                <a href="https://stats.fm/wi110w" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-chart-bar"></i> <h3>Stats.fm</h3> <p>OG</p> </div> </a>
                <a href="https://letterboxd.com/w1ll0ww/" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-film"></i> <h3>Letterboxd</h3> <p>fanatic</p> </div> </a>
                <a href="https://www.alltrails.com/en-gb/members/w1ll0w-user?ref=header" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-mountain"></i> <h3>AllTrails</h3> <p>checkit</p> </div> </a>
                <a href="https://github.com/Yung71nKzH3" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-github"></i> <h3>GitHub</h3> <p>damn SSH</p> </div> </a>
                <a href="https://www.instagram.com/w1ll0_w/" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-instagram"></i> <h3>Instagram</h3> <p>reposts fire</p> </div> </a>
                <a href="https://www.threads.net/@w1ll0_w" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-threads"></i> <h3>Threads</h3> <p>don' look</p> </div> </a>
                <a href="https://steamcommunity.com/id/zfw1ll0w/" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fab fa-steam"></i> <h3>Steam</h3> <p>goated</p> </div> </a>
                <a href="https://anilist.co/user/w1ll0wW/" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-tv"></i> <h3>AniList</h3> <p>Violet bro</p> </div> </a>
                <a href="https://social.vivaldi.net/@W1ll0w" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-comments"></i> <h3>Vivaldi Social</h3> <p>wut is ts?</p> </div> </a>
                <a href="https://www.keybr.com/profile/b57ds5l" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-keyboard"></i> <h3>Keybr</h3> <p>type</p> </div> </a>
                <a href="https://monkeytype.com/profile/w1LL0w" target="_blank" class="sub-panel" onclick="event.stopPropagation()"> <div class="initial-content"> <i class="fas fa-laptop-code"></i> <h3>MonkeyType</h3> <p>yurr</p> </div> </a>
            </div>
        </div>
    </div>
    
    <!-- EMBEDDED PARTICLE SCRIPT -->
    <script>
        // --- Configuration ---
        const TARGET_TEXT = "w1ll0w";
        const PARTICLE_COLOR = '#06b6d4'; // Cyan-500
        const TEXT_SIZE = 120; 
        const RESOLUTION = 4;  // Sample every 4th pixel for particle count
        const HOVER_AREA_RADIUS = 200; // Mouse influence radius for formation trigger
        
        // Physics constants
        const FRICTION = 0.9;
        const SPRING = 0.08; // Strong snap to target
        const DRIFT_SPEED = 0.005; // How quickly the particles drift in SCATTER mode
        
        // --- Setup Canvas and Context ---
        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        
        let particles = [];
        let mouse = { x: 0, y: 0, isHovering: false };
        
        // State management
        let isFormed = false;
        let textMetrics = { width: 0, height: TEXT_SIZE, textX: 0, textY: 0 };
        let box = { x: 0, y: 0, w: 0, h: 0 }; // The confined area

        
        // --- Resize Handler ---
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Re-map the text coordinates on resize
            mapTextToParticles();
        }
        window.addEventListener('resize', resizeCanvas);
        
        // --- Particle Class ---
        class Particle {
            constructor(targetX, targetY, shape) {
                this.targetX = targetX;
                this.targetY = targetY;
                this.shape = shape;

                // Initial position within the confined box
                this.x = box.x + Math.random() * box.w;
                this.y = box.y + Math.random() * box.h;

                // Initial drift target (for SCATTER mode)
                this.initialX = this.x;
                this.initialY = this.y;

                this.vx = 0;
                this.vy = 0;
                this.size = Math.random() * 2 + 1; 
            }

            update() {
                let targetX, targetY;
                
                if (isFormed) {
                    // FORM Mode: Seek text pixel coordinates
                    targetX = this.targetX;
                    targetY = this.targetY;
                } else {
                    // SCATTER Mode: Seek random drift position within the box
                    
                    // Slowly update the scatter target to create subtle movement
                    if (Math.random() < DRIFT_SPEED) {
                        this.initialX = box.x + Math.random() * box.w;
                        this.initialY = box.y + Math.random() * box.h;
                    }
                    targetX = this.initialX;
                    targetY = this.initialY;
                }
                
                // 1. Calculate Snap-to-Target Force
                const dx = targetX - this.x;
                const dy = targetY - this.y;
                
                this.vx += dx * SPRING;
                this.vy += dy * SPRING;
                
                // 2. Apply Friction
                this.vx *= FRICTION;
                this.vy *= FRICTION;

                // 3. Update Position
                this.x += this.vx;
                this.y += this.vy;
            }

            draw() {
                ctx.fillStyle = PARTICLE_COLOR;
                
                // Ensure size is slightly randomized for visual interest
                const s = this.size;

                ctx.beginPath();
                if (this.shape === 'square') {
                    ctx.fillRect(this.x - s / 2, this.y - s / 2, s, s);
                } else if (this.shape === 'circle') {
                    ctx.arc(this.x, this.y, s / 2, 0, Math.PI * 2);
                    ctx.fill();
                } else if (this.shape === 'triangle') {
                    // Simple equilateral triangle pointing up
                    ctx.moveTo(this.x, this.y - s);
                    ctx.lineTo(this.x - s, this.y + s);
                    ctx.lineTo(this.x + s, this.y + s);
                    ctx.closePath();
                    ctx.fill();
                }
            }
        }
        
        // --- Formation Control ---
        function startFormation() {
            if (isFormed) return;
            isFormed = true;
        }
        
        function breakApart() {
            if (!isFormed) return;
            isFormed = false;

            // Reset particle drift targets instantly to ensure quick breakup
            particles.forEach(p => {
                p.initialX = box.x + Math.random() * box.w;
                p.initialY = box.y + Math.random() * box.h;
            });
        }
        
        // --- Text Mapping Function ---
        function mapTextToParticles() {
            particles = []; // Clear existing
            
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            
            // 1. Measure and Draw the target text (hidden)
            tempCtx.font = `${TEXT_SIZE}px 'Inter', sans-serif`;
            tempCtx.textAlign = 'center';
            tempCtx.textBaseline = 'middle';
            
            // *** CHANGE: Position title 20% down from the top ***
            const TITLE_TOP_Y = 0.20; 
            textMetrics.textX = tempCanvas.width / 2;
            textMetrics.textY = tempCanvas.height * TITLE_TOP_Y;
            // **************************************************
            
            textMetrics.width = tempCtx.measureText(TARGET_TEXT).width;
            
            tempCtx.fillStyle = 'white';
            tempCtx.fillText(TARGET_TEXT, textMetrics.textX, textMetrics.textY);
            
            // 2. Define the confined box area (100px padding around the text area)
            const boxMargin = 100;
            box.x = textMetrics.textX - textMetrics.width / 2 - boxMargin;
            box.y = textMetrics.textY - TEXT_SIZE / 2 - boxMargin;
            box.w = textMetrics.width + 2 * boxMargin;
            box.h = TEXT_SIZE + 2 * boxMargin;

            // 3. Get pixel data
            const data = tempCtx.getImageData(0, 0, tempCanvas.width, tempCanvas.height).data;
            const shapes = ['square', 'circle', 'triangle'];
            
            // 4. Iterate through pixels and create particles
            for (let y = 0; y < tempCanvas.height; y += RESOLUTION) {
                for (let x = 0; x < tempCanvas.width; x += RESOLUTION) {
                    const index = (y * tempCanvas.width + x) * 4;
                    
                    if (data[index + 3] > 0) { // If pixel is part of the text
                        const randomShape = shapes[Math.floor(Math.random() * shapes.length)];
                        particles.push(new Particle(x, y, randomShape));
                    }
                }
            }
        }
        
        // --- Animation Loop ---
        function animate() {
            // Increased alpha (0.2) for a sharper trail (less blur)
            ctx.fillStyle = 'rgba(13, 17, 23, 0.2)'; 
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(p => {
                p.update();
                p.draw();
            });

            requestAnimationFrame(animate);
        }

        // --- Event Listeners ---
        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;

            // Calculate distance to the center of the text area
            const dx = mouse.x - textMetrics.textX;
            const dy = mouse.y - textMetrics.textY;
            const dist = Math.sqrt(dx * dx + dy * dy);

            // Check if the mouse is close enough to trigger formation
            if (dist < HOVER_AREA_RADIUS) {
                if (!isFormed) {
                    startFormation();
                }
            } else {
                // If the user moves out of the area, break it apart immediately
                if (isFormed) {
                    breakApart();
                }
            }
        });
        
        // Start the process
        window.onload = function () {
            resizeCanvas();
            mapTextToParticles();
            animate();
        };
        
        // Handle initial load in case load event already fired
        if (document.readyState === 'complete') {
            window.onload();
        }
    </script>

    <!-- LINK UNIVERSAL JAVASCRIPT -->
    <script src="scripts.js"></script> 

</body>
</html>
